<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alpha Online</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" href="site/favicon.ico">
</head>
<body>
  <main class="layout">
    <!-- LEFT COLUMN: Monaco Editor -->
    <section class="editor-panel">
      <div class="panel editor">
        <h2>Editor</h2>
        <div id="editor"></div>
        <div class="row">
          <button id="btn-run">Run</button>
          <button id="btn-stop">Stop</button>
          <button id="btn-clear">Clear Output</button>
        </div>
      </div>
    </section>

    <!-- RIGHT COLUMN -->
    <section class="right-panel">
      <!-- Console -->
      <div class="panel console">
        <h2>Output</h2>
        <pre id="output"></pre>
      </div>

      <!-- Documentation -->
      <div class="panel docs">
        <h2>Documentation</h2>
        <div id="docs-content">
          <p>Welcome to Alpha Online!<br> Write your Alpha code on the left, run it, and see the output here.</p>
        </div>
      </div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js"></script>
  <script>
    require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs' } });

    require(['vs/editor/editor.main'], function () {
      window.editor = monaco.editor.create(document.getElementById('editor'), {
        value: `// Type your Alpha program here`,
        language: 'javascript',
        theme: 'vs-dark',
        automaticLayout: true,
        fontSize: 14,
        minimap: { enabled: false }
      });

      setTimeout(() => {
        const oldDefine = window.define;
        window.define = undefined;

        const loadScript = (src) => new Promise((resolve) => {
          const s = document.createElement('script');
          s.src = src;
          s.onload = resolve;
          document.body.appendChild(s);
        });

        (async () => {
          await loadScript('site/ansi_up.js');
          await loadScript('alphac.js');
          await loadScript('alpha.js');
          await loadScript('site/main.js');

          window.define = oldDefine;
        })();
      }, 200);
    });

  </script>


</body>
</html>
